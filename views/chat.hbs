<div style="margin-left: -100px; position:absolute">
  {{> left}}
</div>

{{!-- 上線使用者 --}}
<div class="col" style="margin-left: 200px;">
  <div class="card">
    <ul class="list-group ">
      <li class="list-group-item">
        上線使用者(<span id="onlineCount">0</span>)
      </li>
      <p id="id" class="d-none">{{user.id}}</p>
      <p id="avatar" class="d-none">{{user.avatar}}</p>
      <h5 id='name' class="d-none">{{user.name}}</h5>
    </ul>
    <ul id="publicPeople" class="list-group overflow-auto">
      <li class="list-group-item">
        <div id="onlinePeople">
          {{!-- 第一個上線者 --}}

          <div class="row justify-content-start align-items-center px-2 py-1 rounded hovercard"
            style="border: 1px solid rgba(0, 0, 0, 0.1); margin-bottom: 3px;" onclick="location.href='/users/{{id}}'">
            <div class="col-2 d-flex justify-content-center align-items-center" id="onlineUsers">
              <img src="https://picsum.photos/200/300?random=5.380306753463349" width="50" height="50"
                class="rounded-circle">
            </div>
            <div class="col-6 d-flex" style="height: 60px;">
              <h5 style="line-height: 60px; font-size: 15px; font-weight: bold;">name</h5>
              <p class="text-muted ps-2" style="font-size: 15px; line-height: 60px; font-weight: 500; color:#657786;">
                @account</p>
            </div>
          </div>

          {{!-- 第二個上線者 --}}
          <div class="row justify-content-start align-items-center px-2 py-1 rounded hovercard"
            style="border: 1px solid rgba(0, 0, 0, 0.1); margin-bottom: 3px;" onclick="location.href='/users/{{id}}'">
            <div class="col-2 d-flex justify-content-center align-items-center" id="onlineUsers">
              <img src="https://picsum.photos/200/300?random=58.72222733877057" width="50" height="50"
                class="rounded-circle">
            </div>

            <div class="col-6 d-flex" style="height: 60px;">
              <h5 style="line-height: 60px; font-size: 15px; font-weight: bold;">name</h5>
              <p class="text-muted ps-2" style="font-size: 15px; line-height: 60px; font-weight: 500; color:#657786;">
                @account</p>
            </div>
          </div>

        </div>
      </li>
    </ul>
  </div>
</div>

{{!-- 公開聊天室 --}}
<div class='col'>
  <div class="card">
    <li class="list-group-item" style="font-weight: bold; font-size: 18px;">
      公開聊天室
    </li>
    <ul id="publicboard" class="list-group overflow-auto">
      <li class="list-group-item" style="border-bottom:none">

        {{!-- output --}}
        <div id='board' class="rounded-3">
          <!--左邊訊息-->
          <div class="d-flex row">
            <div class="col-1 d-flex justify-content-center">
              <a href="/users/{{id}}" class="p-1">
                <img src="https://picsum.photos/200/300?random=23.334051375030683" class="rounded-circle"
                  style="width: 40px; height: 40px" alt="avatar" />
              </a>
            </div>
            <div class="col-11 pl-0 mt-3">
              <div class="msgblockleft">
                <p class="d-inline ">左邊訊息</p>
              </div>
              <p class="text-muted mx-0" style="font-size: 13px; padding-left: 1px; margin-top: 6px;line-height: 13px;">
                下午4:21</p>
            </div>
          </div>
          <!--左邊訊息-->

          <!--右邊訊息-->
          <div class=" d-flex flex-row-reverse">
            <div class="col-3 flex-column">
              <div class="msgblockright">
                <p class="d-inline  ">
                  右邊訊息</p>
              </div>
              <p class="text-muted mx-0 bd-highlight"
                style="font-size: 0.675em; padding-left: 0.3rem; margin-top: 0.3rem;">
                幾秒前</p>
            </div>
            <!--右邊訊息結束-->
            <div id="messages"></div>
          </div>
        </div>
      </li>
    </ul>
    {{!-- input --}}
    <li class="list-group-item mr" id="msgInputBtn">
      <div class="input-group">
        <form id="form" action="" class="d-flex d-inline gap-3" style="width: 100%;">
          <input id="input" autocomplete="off" class="form-control bg-light" placeholder="請輸入訊息..."
            aria-label="msgInput" aria-describedby="basic-addon1"
            style="width: 100%;background: #E6ECF0;border: 1px solid #E6ECF0;border-radius: 50px;">
          <button class="btn btn-tomato ">
            <img src="/images/送出鍵.svg" alt="">
          </button>
        </form>
      </div>
    </li>
  </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();
  var messages = document.getElementById('messages');
  var form = document.getElementById('form');
  var input = document.getElementById('input');
  form.addEventListener('submit', function (e) {
    e.preventDefault();
    if (input.value) {
      socket.emit('chat message', input.value);
      input.value = '';
    }
  });
  socket.on('chat message', function (msg) {
    var item = document.createElement('div');
    item.textContent = msg;
    messages.appendChild(item);
  });
</script>